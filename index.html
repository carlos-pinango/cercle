<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculateur de Proportions</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        const App = () => {
            const [radius, setRadius] = useState(10);
            const [angle, setAngle] = useState(90);
            const [calcValues, setCalcValues] = useState({ total: '', part: '', angle: '' });
            const [calcResult, setCalcResult] = useState(null);

            const stats = useMemo(() => {
                const circumference = 2 * Math.PI * radius;
                const totalArea = Math.PI * Math.pow(radius, 2);
                const displayAngle = Math.min(Math.max(angle, 0.01), 360);
                const arcLength = (displayAngle / 360) * circumference;
                const sectorArea = (displayAngle / 360) * totalArea;
                return { circumference, totalArea, arcLength, sectorArea };
            }, [radius, angle]);

            const centerX = 150;
            const centerY = 150;
            const svgRadius = 110; 
            
            const getCoords = (ang) => {
                const rad = (ang - 90) * (Math.PI / 180);
                return {
                    x: centerX + svgRadius * Math.cos(rad),
                    y: centerY + svgRadius * Math.sin(rad)
                };
            };

            const endPoint = getCoords(angle);
            const isLargeArc = angle > 180 ? 1 : 0;
            let d = angle >= 360 
                ? `M ${centerX}, ${centerY - svgRadius} a ${svgRadius},${svgRadius} 0 1,0 0.1,0 z`
                : `M ${centerX} ${centerY} L ${centerX} ${centerY - svgRadius} A ${svgRadius} ${svgRadius} 0 ${isLargeArc} 1 ${endPoint.x} ${endPoint.y} Z`;

            const runManualCalculation = () => {
                const t = parseFloat(calcValues.total);
                const p = parseFloat(calcValues.part);
                const a = parseFloat(calcValues.angle);
                if (!isNaN(t) && !isNaN(a) && isNaN(p)) {
                    setCalcResult({ label: "Valeur de la partie", value: ((a / 360) * t).toFixed(2) });
                } else if (!isNaN(p) && !isNaN(a) && isNaN(t)) {
                    setCalcResult({ label: "Valeur totale", value: ((p * 360) / a).toFixed(2) });
                } else if (!isNaN(p) && !isNaN(t) && isNaN(a)) {
                    setCalcResult({ label: "Angle au centre", value: ((p / t) * 360).toFixed(2) + "°" });
                } else {
                    setCalcResult({ error: "Remplissez exactement deux champs." });
                }
            };

            return (
                <div className="min-h-screen bg-slate-50 p-4 font-sans text-slate-900">
                    <div className="max-w-5xl mx-auto space-y-6">
                        <div className="bg-indigo-600 text-white p-6 rounded-2xl shadow-md">
                            <h1 className="text-2xl font-bold italic">○ Rapports et Proportions</h1>
                            <p className="text-indigo-100 text-sm opacity-90">Etude : Rayon (1-20) | Angle (1-360)</p>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div className="space-y-6">
                                <div className="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
                                    <div className="flex justify-center bg-slate-50 p-4 rounded-xl mb-6">
                                        <svg width="240" height="240" viewBox="0 0 300 300">
                                            <circle cx={centerX} cy={centerY} r={svgRadius} fill="white" stroke="#e2e8f0" strokeWidth="2" />
                                            <path d={d} fill="#818cf8" fillOpacity="0.6" stroke="#4f46e5" strokeWidth="3" />
                                            <circle cx={centerX} cy={centerY} r="4" fill="#1e1b4b" />
                                        </svg>
                                    </div>
                                    <div className="space-y-4">
                                        <label className="block text-xs font-bold text-slate-500 uppercase">Rayon: {radius}</label>
                                        <input type="range" min="1" max="20" step="0.5" value={radius} onChange={(e) => setRadius(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none accent-indigo-600" />
                                        <label className="block text-xs font-bold text-slate-500 uppercase">Angle: {angle}°</label>
                                        <input type="range" min="1" max="360" value={angle} onChange={(e) => setAngle(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none accent-indigo-600" />
                                    </div>
                                </div>

                                <div className="bg-white p-6 rounded-2xl border-2 border-indigo-100 shadow-sm">
                                    <h2 className="font-bold text-indigo-700 mb-4 text-center">Rapport Identique = {(angle/360).toFixed(4)}</h2>
                                    <div className="grid grid-cols-3 gap-2 text-center text-[10px]">
                                        <div className="p-2 bg-slate-50 rounded">Angle/360</div>
                                        <div className="p-2 bg-indigo-50 rounded">Arc/Circ.</div>
                                        <div className="p-2 bg-emerald-50 rounded">Sect./Aire</div>
                                    </div>
                                </div>
                            </div>

                            <div className="bg-white p-6 rounded-2xl border border-slate-200 shadow-sm">
                                <h2 className="font-bold mb-6 text-lg">⌨ Calculateur</h2>
                                <div className="space-y-4">
                                    <input placeholder="Total (C ou A)" type="number" value={calcValues.total} onChange={(e)=>setCalcValues({...calcValues, total: e.target.value})} className="w-full p-3 bg-slate-50 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-400" />
                                    <input placeholder="Partie (Arc ou Secteur)" type="number" value={calcValues.part} onChange={(e)=>setCalcValues({...calcValues, part: e.target.value})} className="w-full p-3 bg-slate-50 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-400" />
                                    <input placeholder="Angle (°)" type="number" value={calcValues.angle} onChange={(e)=>setCalcValues({...calcValues, angle: e.target.value})} className="w-full p-3 bg-slate-50 border rounded-xl outline-none focus:ring-2 focus:ring-indigo-400" />
                                    <button onClick={runManualCalculation} className="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700">Calculer</button>
                                    {calcResult && (
                                        <div className="p-4 rounded-xl bg-green-50 text-green-700 border border-green-100">
                                            {calcResult.error || <div><p className="text-xs uppercase">{calcResult.label}</p><p className="text-xl font-bold">{calcResult.value}</p></div>}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
